{{yield}}
{{#if this.error}}
    <BsAlert
      @visible={{true}}
      @fade={{true}}
      @type="danger"
      @dismissible={{false}}
    >{{this.error}}</BsAlert>
{{/if}}

<BsForm @model={{this}} @formLayout="vertical" @model={{this}} @onSubmit={{action "register"}} as |form|>
  <form.element @controlType="Email" @label="Email" @property="email_addr" as |el|>
    <el.control placeholder="Email" required>
      {{#if this.email_error}}
        <BsPopover @placement="left" title="Error">
          {{this.email_error}}
        </BsPopover>
      {{/if}}
    </el.control>
  </form.element>
  <form.element @controlType="text" @label="Username" @property="username" as |el|>
    <el.control placeholder="Enter Username" required />
  </form.element>
  <form.element @controlType="password" @label="Password" @property="password" as |el|>
      <el.control placeholder="Password" required />
  </form.element>
  <form.element @controlType="password" @label="Confirm Password" @property="confirm_password" as |el|>
      <el.control placeholder="Enter Password Again" required />
  </form.element>
  <form.element @controlType="text" @label="Invite Code" @property="invite" as |el|>
    <el.control placeholder="Invite Code" required />
  </form.element>
  <form.submitButton>Register</form.submitButton>
</BsForm>

{{#if this.captcha_needed}}
    {{g-recaptcha-v2 siteKey='6Le0TzsbAAAAAO8s3f1kH9bu-aU1pedZYM8GK4ah' verified=(action 'setcaptcha')}}
{{/if}}